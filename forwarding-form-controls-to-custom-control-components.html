<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 6.4.7.2 (Linux)"/>
	<meta name="created" content="2023-02-12T15:50:54.452438895"/>
	<meta name="changed" content="2023-02-12T15:58:01.292281105"/>
	<style type="text/css">
		h1.cjk { font-family: "Noto Serif CJK SC" }
		h1.ctl { font-family: "Lohit Devanagari" }
		h2.cjk { font-family: "Noto Serif CJK SC" }
		h2.ctl { font-family: "Lohit Devanagari" }
		pre.cjk { font-family: "Noto Sans Mono CJK SC", monospace }
		code.cjk { font-family: "Noto Sans Mono CJK SC", monospace }
	</style>
</head>
<body lang="en-CA" dir="ltr"><p style="font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal">
<font color="#000000"><font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">https://netbasal.com/forwarding-form-controls-to-custom-control-components-in-angular-701e8406cc55</font></font></font></p>
<p style="font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal">
<font color="#000000"><font face="Liberation Serif, serif"><font size="4" style="font-size: 14pt">Jan
25, 2023</font></font></font></p>
<h1 class="western" style="font-variant: normal; letter-spacing: normal; font-style: normal"><a name="37b51"></a>
<font color="#000000"><font face="Liberation Serif, serif"><font size="6" style="font-size: 24pt"><b>Forwarding
Form Controls to Custom Control Components in Angular</b></font></font></font></h1>
<p style="margin-bottom: 0.25cm; line-height: 0.51cm; orphans: 2; widows: 2; background: transparent">
<br/>
<br/>

</p>
<p style="margin-bottom: 0.25cm; line-height: 0.51cm; orphans: 2; widows: 2; background: transparent"><a name="3381"></a>
<span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">Sometimes
we want to forward and use an existing form control rather than
creating a redundant value accessor wrapper. One common use case is
when creating, for example, custom&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">input</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;components.
The following image describes our goal:</span></span></span></font></font></font></span></p>
<p style="margin-bottom: 0.25cm; font-variant: normal; letter-spacing: normal; line-height: 0.51cm; orphans: 2; widows: 2; background: transparent">
<font color="#000000"><img src="forwarding-form-controls-to-custom-control-components_html_63b4475ac9664c47.png" name="Image1" align="bottom" width="1400" height="557" border="0"/>
</font></p>
<p style="margin-bottom: 0.25cm; line-height: 0.51cm; orphans: 2; widows: 2; background: transparent"><a name="1de0"></a>
<span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">We
want to use form controls passed via&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">formControl</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">,&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">formControlName</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">,
and&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">ngModel</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;directives
in our custom&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">input</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;component
and forward it to our internal&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">input</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;element.
Let’s see two ways we can do it:</span></span></span></font></font></font></span></p>
<h2 class="western" style="margin-top: 0.35cm; margin-bottom: 0.21cm; font-variant: normal; letter-spacing: normal; font-style: normal; orphans: 2; widows: 2; background: transparent"><a name="3b1e"></a>
<font color="#000000"><font face="Liberation Serif, serif"><font size="5" style="font-size: 18pt"><b>Setting
the Control valueAccessor property</b></font></font></font></h2>
<p style="margin-bottom: 0.25cm; line-height: 0.51cm; orphans: 2; widows: 2; background: transparent"><a name="e71b"></a>
<span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">The
first option we might take is to use the&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">NodeInjector</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;and
retrieve a reference to our control using the&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">NgControl</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;provider:</span></span></span></font></font></font></span></p>
<pre class="western" style="font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; orphans: 2; widows: 2; background: transparent"><a name="93be"></a><font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">@Component({</font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">selector: 'app-input',</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">template: `&lt;input /&gt;`,</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">providers: [{ </span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">provide: NG_VALUE_ACCESSOR, </span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">multi: true, </span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">useExisting: InputComponent </span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}]</span></span></font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">})</font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">export class InputComponent implements ControlValueAccessor {</font></font></font>
<font color="#000000">   <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">const ngControl = inject(NgControl, { self: true });</span></span></font></font></font>
<font color="#000000">   <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">...</span></span></font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">}</font></font></font></pre><p style="margin-bottom: 0.25cm; font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; line-height: 0.51cm; orphans: 2; widows: 2; background: transparent">
<a name="e529"></a><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt">However,
that won’t work, because we’ll receive a circular dependency
error.</font></font></font></p>
<p style="margin-bottom: 0.25cm; line-height: 0.51cm; orphans: 2; widows: 2; background: transparent"><a name="8596"></a>
<span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">It’s
possible to address this by removing the provider, injecting
the&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">NgControl</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">,
and explicitly setting the&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">valueAccessor</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;property
to a&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">noop</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;value
accessor, as we don’t care about the value; we just want to
“satisfy” Angular.</span></span></span></font></font></font></span></p>
<pre class="western" style="font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; orphans: 2; widows: 2; background: transparent"><a name="b57c"></a><font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">class NoopValueAccessor implements ControlValueAccessor {</font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">writeValue() {}</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">registerOnChange() {}</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">registerOnTouched() {}</span></span></font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">}</font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">function injectNgControl() {</font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">const ngControl = inject(NgControl, { self: true, optional: true });</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if (!ngControl) throw new Error('...');</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if (</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ngControl instanceof FormControlDirective ||</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ngControl instanceof FormControlName ||</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ngControl instanceof NgModel</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">) {</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">// 👇👇👇</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ngControl.valueAccessor = new NoopValueAccessor();</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return ngControl;</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">throw new Error(`...`);</span></span></font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">}</font></font></font></pre><p style="margin-bottom: 0.25cm; line-height: 0.51cm; orphans: 2; widows: 2; background: transparent">
<a name="8c51"></a><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">Now,
we can use it in our&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">input</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;component:</span></span></span></font></font></font></span></p>
<pre class="western" style="font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; orphans: 2; widows: 2; background: transparent"><a name="681f"></a><font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">@Component({</font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">selector: 'app-input',</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">standalone: true,</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">imports: [ReactiveFormsModule],</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">template: `&lt;input [formControl]=&quot;ngControl.control&quot; /&gt; `,</span></span></font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">})</font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">export class InputComponent {</font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ngControl = injectNgControl();</span></span></font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">}</font></font></font></pre><h2 class="western" style="margin-top: 0.35cm; margin-bottom: 0.21cm; font-variant: normal; letter-spacing: normal; font-style: normal; orphans: 2; widows: 2; background: transparent">
<a name="eff9"></a><font color="#000000"><font face="Liberation Serif, serif"><font size="5" style="font-size: 18pt"><b>Using
Host Directives</b></font></font></font></h2>
<p style="margin-bottom: 0.25cm; line-height: 0.51cm; orphans: 2; widows: 2; background: transparent"><a name="e26d"></a>
<span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">The
first technique works, but it always feels “hacky” since we’re
essentially doing Angular’s job by setting the value accessor
property. We can now leverage the host directives feature to get the
same result. First, we’ll create a&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">NoopValueAccessorDirective</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></span></font></font></font></span></p>
<pre class="western" style="font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; orphans: 2; widows: 2; background: transparent"><a name="45a3"></a><font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">@Directive({</font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">standalone: true,</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">providers: [</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font>
<font color="#000000">      <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">provide: NG_VALUE_ACCESSOR,</span></span></font></font></font>
<font color="#000000">      <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">multi: true,</span></span></font></font></font>
<font color="#000000">      <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">useExisting: NoopValueAccessorDirective,</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">},</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">],</span></span></font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">})</font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">export class NoopValueAccessorDirective implements ControlValueAccessor {</font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">writeValue(obj: any): void {}</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">registerOnChange(fn: any): void {}</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">registerOnTouched(fn: any): void {}</span></span></font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">}</font></font></font></pre><p style="margin-bottom: 0.25cm; line-height: 0.51cm; orphans: 2; widows: 2; background: transparent">
<a name="6335"></a><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">The
next step is to create the same&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">injectNgControl</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;function
as before without setting the value accessor property:</span></span></span></font></font></font></span></p>
<pre class="western" style="font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; orphans: 2; widows: 2; background: transparent"><a name="9add"></a><font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">export function injectNgControl() {</font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">const ngControl = inject(NgControl, { self: true, optional: true });</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if (!ngControl) throw new Error('...');</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if (</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ngControl instanceof FormControlDirective ||</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ngControl instanceof FormControlName ||</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ngControl instanceof NgModel</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">) {</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return ngControl;</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">throw new Error('...');</span></span></font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">}</font></font></font></pre><p style="margin-bottom: 0.25cm; line-height: 0.51cm; orphans: 2; widows: 2; background: transparent">
<a name="a420"></a><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">Finally,
we’ll use it in our&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">input</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;component:</span></span></span></font></font></font></span></p>
<pre class="western" style="font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; orphans: 2; widows: 2; background: transparent"><a name="6725"></a><font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">@Component({</font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">selector: 'app-input',</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">standalone: true,</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">// 👇👇👇</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">hostDirectives: [NoopValueAccessorDirective],</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">imports: [ReactiveFormsModule],</span></span></font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">template: ` &lt;input [formControl]=&quot;ngControl.control&quot; /&gt; `,</span></span></font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">})</font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">export class InputComponent {</font></font></font>
<font color="#000000">  <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ngControl = injectNgControl();</span></span></font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">}</font></font></font></pre><p style="margin-bottom: 0.25cm; line-height: 0.51cm; orphans: 2; widows: 2; background: transparent">
<a name="59e7"></a><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">Now,
we can use our&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">input</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;component
with any&nbsp;</span></span></span></font></font></font></span><code class="western"><span style="font-variant: normal"><font color="#000000"><font face="Liberation Mono, monospace"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">control</span></span></span></font></font></font></span></code><span style="font-variant: normal"><font color="#000000"><font face="Times New Roman"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">&nbsp;we
want:</span></span></span></font></font></font></span></p>
<pre class="western" style="font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; orphans: 2; widows: 2; background: transparent"><a name="a062"></a><font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">&lt;app-input [formControl]=&quot;control&quot; /&gt;</font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">&lt;form [formGroup]=&quot;form&quot;&gt;</font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;app-input formControlName=&quot;name&quot;&gt;&lt;/app-input&gt;</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;ng-container formArrayName=&quot;skills&quot;&gt;</span></span></font></font></font>
<font color="#000000">       <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;app-input [formControlName]=&quot;index&quot; </span></span></font></font></font>
<font color="#000000">            <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*ngFor=&quot;let c of skills.controls; index as index&quot;&gt;&lt;/app-input&gt;</span></span></font></font></font>
<font color="#000000">    <font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/ng-container&gt;</span></span></font></font></font>
<font color="#000000"><font face="Liberation Mono, monospace"><font size="2" style="font-size: 10pt">&lt;/form&gt;</font></font></font></pre><p>
<br/>
<br/>
<br/>

</p>
</body>
</html>